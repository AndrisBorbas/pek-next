<div class="uk-height-viewport uk-responsive-width">
  <div class="uk-container-center">
    <div class="uk-panel uk-panel-box">
      <h3 class="uk-panel-title"><%= @group.name %></h3>
      <h2 class="uk-h2">Kör adatai</h2>
      <table>
        <tbody>
          <tr>
            <th class="group-attr">Név</th>
            <td><%= @group.name %></td>
          </tr>
          <tr>
            <th class="group-attr">Alapítási éve</th>
            <td><%= @group.founded %></td>
          </tr>
          <tr>
            <th class="group-attr">Svie tag</th>
            <td><%= @group.issvie ? "Igen" : "Nem" %></td>
          </tr>
          <tr>
            <th class="group-attr">Weboldal</th>
            <td><%= @group.webpage %></td>
          </tr>
          <tr>
            <th class="group-attr">Levelezőlista</th>
            <td><%= @group.maillist %></td>
          </tr>
          <tr>
            <th class="group-attr">Bemutatkozás</th>
            <td><%= @group.description %></td>
          </tr>
        </tbody>
      </table>
      <% if @group.users_can_apply && !@own_membership %>
        <%= form_tag group_membership_index_path(@group), {method: 'post'} do %>
          <%= button_tag "Jelentkezés körbe", {class: "uk-button uk-button-primary"} %>
        <% end %>
      <% end %>
      <h2 class="uk-h2">Aktív tagok</h2>
      <table class="uk-table uk-table-striped uk-table-hover">
        <thead>
          <tr>
            <th>Név</th>
            <th>Becenév</th>
            <th>Betöltött poszt</th>
            <th>Tagság kezdete</th>
            <% if @own_membership && @own_membership.is_leader %>
              <th>Módosítás</th>
              <th>Öregtaggá avatás</th>
              <th>Törlés</th>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <% @group.memberships.select{ |m| !m.end }.each do |membership| %>
          <% member = membership.user %>
          <tr>
            <td><%= member.lastname %> <%= member.firstname %></td>
            <td><%= member.nickname %></td>
            <td>
              <%= membership.post_types.join(',') %>
            </td>
            <td><%= membership.start %></td>
            <% if @own_membership && @own_membership.is_leader %>
              <td>
                <%= link_to "Öreggé avatás", group_membership_inactivate_path(@group.id, member.id),
                  class: "uk-button uk-button-small uk-button-primary" %>
              </td>
              <td>
                <%= link_to "Törlés", group_membership_path(@group.id, member.id),
                 class: "uk-button uk-button-small uk-button-danger", method: :delete, data: {confirm: "Biztos vagy benne?"} %>
              </td>
            <% end %>
          </tr>
          <% end %>
        </tbody>
      </table>

      <h2 class="uk-h2">Öregtagok</h2>
      <table class="uk-table uk-table-striped uk-table-hover">
        <thead>
          <tr>
            <th>Név</th>
            <th>Becenév</th>
            <th>Betöltött poszt</th>
            <th>Tagság kezdete</th>
            <th>Tagság vége</th>
          </tr>
        </thead>
        <tbody>
          <% @group.memberships.select{ |m| m.end }.each do |membership| %>
          <% member = membership.user %>
          <tr>
            <td><%= member.lastname %> <%= member.firstname %></td>
            <td><%= member.nickname %></td>
            <td>
              <%= membership.post_types.join(',') %>
            </td>
            <td><%= membership.start %></td>
            <td><%= membership.end %></td>
            <% if @own_membership && @own_membership.is_leader %>
              <td>
                <%= link_to "Fiatallá avatás", group_membership_reactivate_path(@group.id, member.id),
                  class: "uk-button uk-button-small uk-button-primary" %>
              </td>
              <td>
                <%= link_to "Törlés", group_membership_path(@group.id, member.id),
                 class: "uk-button uk-button-small uk-button-danger", method: :delete, data: {confirm: "Biztos vagy benne?"} %>
              </td>
            <% end %>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
